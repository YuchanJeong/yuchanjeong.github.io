



  




<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="false"
><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FFFFFF" />
  
  <title>[Debate-Ducks] 에러 페이지 & 스크롤 위치 기억하기 &middot; Yuchan&#39;s hello world!</title>
    <meta name="title" content="[Debate-Ducks] 에러 페이지 & 스크롤 위치 기억하기 &middot; Yuchan&#39;s hello world!" />
  
  
  
  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js"
    integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="
  ></script>
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.b0785c8131a75f72b211435af86269eb2d4b81dda03a8f2cf5ccb1c967747167.css"
    integrity="sha256-sHhcgTGnX3KyEUNa&#43;GJp6y1Lgd2gOo8s9cyxyWd0cWc="
  />
  
    
    
    
  
  
  
    
    
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.f29ffdffd9ab4cc95250c3c7196b2d5dae8ee6ef0a4139451073f90183ae7e31.js"
      integrity="sha256-8p/9/9mrTMlSUMPHGWstXa6O5u8KQTlFEHP5AYOufjE="
      data-copy="Copy"
      data-copied="Copied"
    ></script>
  
  
  <meta
    name="description"
    content="
      
        에러 페이지 제작 #*Pull Request
      
    "
  />
  
  
  
  <link rel="canonical" href="https://yuchanjeong.github.io/posts/projects/debate-ducks/26/" />
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:title" content="[Debate-Ducks] 에러 페이지 &amp; 스크롤 위치 기억하기" />
<meta property="og:description" content="에러 페이지 제작 #*Pull Request" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuchanjeong.github.io/posts/projects/debate-ducks/26/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-08-20T00:00:00+00:00" />


  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="[Debate-Ducks] 에러 페이지 &amp; 스크롤 위치 기억하기"/>
<meta name="twitter:description" content="에러 페이지 제작 #*Pull Request"/>

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "[Debate-Ducks] 에러 페이지 \u0026 스크롤 위치 기억하기",
    "headline": "[Debate-Ducks] 에러 페이지 \u0026 스크롤 위치 기억하기",
    
    "abstract": "에러 페이지 제작 #*Pull Request",
    "inLanguage": "en",
    "url" : "https:\/\/yuchanjeong.github.io\/posts\/projects\/debate-ducks\/26\/",
    "author" : {
      "@type": "Person",
      "name": ""
    },
    "copyrightYear": "2022",
    "dateCreated": "2022-08-20T00:00:00\u002b00:00",
    "datePublished": "2022-08-20T00:00:00\u002b00:00",
    
    "dateModified": "2022-08-20T00:00:00\u002b00:00",
    
    "keywords": ["\\Debate-Ducks","(Devlog)"],
    
    "mainEntityOfPage": "true",
    "wordCount": "605"
  }
  </script>
    
    <script type="application/ld+json">
    {
   "@context": "https://schema.org",
   "@type": "BreadcrumbList",
   "itemListElement": [
     {
       "@type": "ListItem",
       "item": "https://yuchanjeong.github.io/",
       "name": "Yuchan's Hello World!",
       "position": 1
     },
     {
       "@type": "ListItem",
       "item": "https://yuchanjeong.github.io/posts/",
       "name": "Posts",
       "position": 2
     },
     {
       "@type": "ListItem",
       "item": "https://yuchanjeong.github.io/categories/projects/",
       "name": "\u003cProjects\u003e",
       "position": 3
     },
     {
       "@type": "ListItem",
       "name": "[ Debate Ducks] 에러 페이지 \u0026 스크롤 위치 기억하기",
       "position": 4
     }
   ]
 }
  </script>

  
  
  
  
  






  
  
  
  
  
  


  
  
</head>
<body
    class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content"
        ><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden">
  <nav class="flex items-start justify-between sm:items-center">
    
    <div class="flex flex-row items-center">
      
  <a
    class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
    rel="me"
    href="/"
    >Yuchan&rsquo;s hello world!</a
  >

    </div>
    
    
      <ul class="flex list-none flex-col text-end sm:flex-row">
        
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/posts/"
                  title="Posts"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Posts</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/categories/"
                  title="Categories"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Categories</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/tags/"
                  title="Tags"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Tags</span
                    >
                  </a
                >
              
            </li>
          
          
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0">
              <button id="search-button-m0" title="Search (/)">
                <span
                  class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"
                >
                  <span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
                </span>
              </button>
            </li>
          
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex grow flex-col">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
      <h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        [Debate-Ducks] 에러 페이지 & 스크롤 위치 기억하기
      </h1>
      
        <div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
          





  
  



  

  
  
    
  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2022-08-20 00:00:00 &#43;0000 UTC">20 August 2022</time>
    

    
    
  </div>

  
  
    <div class="my-1 flex flex-wrap text-xs leading-relaxed text-neutral-500 dark:text-neutral-400">
      
        
          
            <a
              href="/categories/projects/"
              class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >&lt;Projects&gt;</a
            >
          
        
      
        
          
            <a
              href="/tags/%5Cdebate-ducks/"
              class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >\Debate-Ducks</a
            >
          
            <a
              href="/tags/devlog/"
              class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400"
              >(Devlog)</a
            >
          
        
      
    </div>
  


        </div>
      
      
    </header>
    <section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row">
      
        <div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8">
          <div class="toc pe-5 lg:sticky lg:top-10 print:hidden">
            <details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5">
  <summary
    class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden"
  >
    Table of Contents
  </summary>
  <div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#에러-페이지-제작">에러 페이지 제작</a></li>
    <li><a href="#스크롤-위치-기억하기">스크롤 위치 기억하기</a></li>
    <li><a href="#수화-불일치-문제-해결">수화 불일치 문제 해결</a></li>
    <li><a href="#etc">Etc</a>
      <ul>
        <li><a href="#단순-주석-체계-수정">단순 주석 체계 수정</a></li>
        <li><a href="#토큰-만료-시-삭제">토큰 만료 시 삭제</a></li>
        <li><a href="#파일-이름-문제">파일 이름 문제</a></li>
        <li><a href="#watch-모드-문제">watch 모드 문제</a></li>
      </ul>
    </li>
    <li><a href="#해킹-시도">해킹 시도!?</a></li>
  </ul>
</nav>
  </div>
</details>

          </div>
        </div>
      
      <div class="min-h-0 min-w-0 max-w-prose grow">
        <h2 id="에러-페이지-제작" class="relative group">에러 페이지 제작 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%ec%97%90%eb%9f%ac-%ed%8e%98%ec%9d%b4%ec%a7%80-%ec%a0%9c%ec%9e%91" aria-label="Anchor">#</a></span></h2><p><em>*<a href="https://github.com/SuSang-YuHee/Debate-Ducks-Client/pull/119" target="_blank" rel="noreferrer">Pull Request</a></em></p>
<img width="600" alt="에러 페이지1" src="https://user-images.githubusercontent.com/84524514/185801108-53e2a625-ac33-4cd8-83a6-5a747153eb88.png">
<p>Amazon의 에러 페이지에 귀여운 강아지가 있는 것이 마음에 들어서 참조했다. 또한 에러 페이지의 경우 마주하는 것만으로도 사용자가 불쾌감을 느낄 수 있는데, 이를 최소화하기 위해 귀여운 이미지를 사용하는 것은 좋은 방법이라고 생각해서 새끼 오리를 넣었다.</p>
<p>그리고 푸터가 중간에 오고 아래 여백이 남는 상황이 발생하는 게 마음에 들지 않아 최소 높이로 기본 공간을 확보해 주고, 뷰의 높이에서 헤더와 푸터를 뺀 높이를 높이로 삼아서 푸터가 중간에 오는 일이 없게 만들었다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="na">min-height</span><span class="o">:</span> <span class="mi">44</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="na">height</span><span class="o">:</span> <span class="nf">calc</span><span class="p">(</span><span class="mi">100</span><span class="kt">vh</span> <span class="o">-</span> <span class="mi">14</span><span class="kt">rem</span><span class="p">);</span>
</span></span></code></pre></div><img width="600" alt="에러 페이지2" src="https://user-images.githubusercontent.com/84524514/185801119-aeca34b6-c378-413c-9bd2-41f831460d92.png">
<h2 id="스크롤-위치-기억하기" class="relative group">스크롤 위치 기억하기 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%ec%8a%a4%ed%81%ac%eb%a1%a4-%ec%9c%84%ec%b9%98-%ea%b8%b0%ec%96%b5%ed%95%98%ea%b8%b0" aria-label="Anchor">#</a></span></h2><p><em>*<a href="https://github.com/SuSang-YuHee/Debate-Ducks-Client/pull/122" target="_blank" rel="noreferrer">Pull Request</a></em></p>
<p>






  
  
<figure><img src="https://user-images.githubusercontent.com/84524514/185802359-0750f4d4-ed3c-44c6-beac-90e8d4335e5d.gif" alt="scrollY-save" class="mx-auto my-0 rounded-md" />
</figure>
</p>
<p>토론 목록에서 토론 게시물 확인 후 목록으로 돌아갔을 때 목록의 처음으로 되돌아가는 문제가 있었다. 이를 해결하기 위해 전역 변수로 메인 페이지의 스크롤 위치를 저장해서 되돌아갈 때 해당 위치로 이동하게 만들었다.</p>
<p>하지만 첫 페이지(무한 스크롤이라 눈에 보이는 페이지 구분은 없지만 요청은 페이지 단위로 일어남) 이상으로는 되돌아 가지 못하는 문제가 발생했다. 원인을 파악하던 도중 SSR에서 무한 스크롤은 첫 페이지만 가져온다는 점을 깨달았다. 그래서 SSR을 제거해 줬더니 잘 작동했다. 이 과정에서 SSR을 적용한 무한 스크롤이 마지막 페이지를 가져오지 못하는 문제도 발견했다. (SSR에 대해서는 추가 학습이 필요함 🔥)</p>
<p>마지막으로 스크롤 이벤트의 발생 횟수를 조절하기 위해 debounce를 적용시켰다. throttle이 아닌 debounce를 적용 시킨 이유는 지연 시간을 300ms로 두고 헤더의 바로 아래까지만 스크롤을 했을 때, 아무것도 적용하지 않았을 때는 68번, throttle을 적용 했을 때는 612번, debounce를 적용 했을 때는 5번의 이벤트가 발생했기 때문이다. (왜 throttle을 적용했을 때 더 많은 이벤트가 발생하는지는 파악 실패) 또한 마지막 스크롤 위치만 기억하면 되는 현재 이벤트는 사용자가 이벤트를 발생 시키지 않고 끝까지 스크롤을 해도 상관없기 때문에 디바운스를 적용시켰다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="c1">//# 스크롤 위치 기억
</span></span></span><span class="line"><span class="cl"><span class="c1">//&gt; 스크롤 저장
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">handleSetScrollY</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">globalThis</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">===</span> <span class="s2">&#34;/&#34;</span><span class="p">)</span> <span class="nx">setScrollY</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//&gt; 스크롤 이동
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">scrollY</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">scrollY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span> <span class="p">[</span><span class="nx">scrollY</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//&gt; 스크롤 감지
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">watch</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;scroll&#34;</span><span class="p">,</span> <span class="nx">_</span><span class="p">.</span><span class="nx">debounce</span><span class="p">(</span><span class="nx">handleSetScrollY</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">watch</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&#34;scroll&#34;</span><span class="p">,</span> <span class="nx">_</span><span class="p">.</span><span class="nx">debounce</span><span class="p">(</span><span class="nx">handleSetScrollY</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>Ps. 처음에는 카드를 눌러서 이동할 때 스크롤 위치를 저장할 까도 생각했는데, 그렇게 할 경우 게시물 확인 후 목록으로 되돌아온 다음 다른 페이지를 확인하고 다시 되돌아올 경우 이전 스크롤 위치로 돌아가기 때문에 스크롤 위치를 계속 저장하는 현재의 방식으로 결정했다.</p>
<h2 id="수화-불일치-문제-해결" class="relative group">수화 불일치 문제 해결 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%ec%88%98%ed%99%94-%eb%b6%88%ec%9d%bc%ec%b9%98-%eb%ac%b8%ec%a0%9c-%ed%95%b4%ea%b2%b0" aria-label="Anchor">#</a></span></h2><p><em>*<a href="https://github.com/SuSang-YuHee/Debate-Ducks-Client/pull/121" target="_blank" rel="noreferrer">Pull Request</a></em>
<em>*<a href="https://github.com/SuSang-YuHee/Debate-Ducks-Client/issues/120" target="_blank" rel="noreferrer">Issue</a></em></p>
<p><strong># 문제</strong></p>
<p>홈 &amp; 탑 버튼 컴포넌트에서 수화 불일치 문제가 했다.</p>
<img width="250" alt="수화 불일치 문제" src="https://user-images.githubusercontent.com/84524514/185801676-61fdac70-978d-4dac-acaa-2824493452d6.png">
<p><strong># 원인</strong></p>
<p>사전 렌더링 된 React 트리와 브라우저에서 첫 번째로 렌더링 된 React 트리 간에 차이 때문에 발생한다. 대표적인 예로 <code>window</code>를 사용했을 때 발생할 수 있다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">[</span><span class="nx">scrollY</span><span class="p">,</span> <span class="nx">setScrollY</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">number</span><span class="p">&gt;(</span>
</span></span><span class="line"><span class="cl">  <span class="k">typeof</span> <span class="nb">window</span> <span class="o">!==</span> <span class="s2">&#34;undefined&#34;</span> <span class="o">?</span> <span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span> : <span class="kt">0</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></div><p><strong># 해결</strong></p>
<p>사전 렌더링 될 때 useState의 초깃값을 사용하게 되고, 브라우저에서 첫 번째로 렌더링 된 후 useEffect로 변경된 값을 사용하면 해결된다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">[</span><span class="nx">scrollY</span><span class="p">,</span> <span class="nx">setScrollY</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">number</span><span class="p">&gt;(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setScrollY</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span> <span class="p">[]);</span>
</span></span></code></pre></div><h2 id="etc" class="relative group">Etc <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#etc" aria-label="Anchor">#</a></span></h2><h3 id="단순-주석-체계-수정" class="relative group">단순 주석 체계 수정 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%eb%8b%a8%ec%88%9c-%ec%a3%bc%ec%84%9d-%ec%b2%b4%ea%b3%84-%ec%88%98%ec%a0%95" aria-label="Anchor">#</a></span></h3><p><em>*<a href="https://github.com/SuSang-YuHee/Debate-Ducks-Client/pull/117" target="_blank" rel="noreferrer">Pull Request</a></em></p>
<ol>
<li>//#</li>
<li>//&gt;</li>
<li>//-</li>
</ol>
<h3 id="토큰-만료-시-삭제" class="relative group">토큰 만료 시 삭제 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%ed%86%a0%ed%81%b0-%eb%a7%8c%eb%a3%8c-%ec%8b%9c-%ec%82%ad%ec%a0%9c" aria-label="Anchor">#</a></span></h3><p><em>*<a href="https://github.com/SuSang-YuHee/Debate-Ducks-Client/pull/118" target="_blank" rel="noreferrer">Pull Request</a></em></p>
<p>로컬 저장소에 저장되어 있는 토큰이 만료되었을 때 삭제해 줌으로써 필요 없는 요청을 방지했다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="nx">onError</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="s2">&#34;debate-ducks-token&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryClient</span><span class="p">.</span><span class="nx">setQueryData</span><span class="p">([</span><span class="nx">queryKeys</span><span class="p">.</span><span class="nx">users</span><span class="p">],</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryClient</span><span class="p">.</span><span class="nx">invalidateQueries</span><span class="p">([</span><span class="nx">queryKeys</span><span class="p">.</span><span class="nx">users</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><h3 id="파일-이름-문제" class="relative group">파일 이름 문제 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%ed%8c%8c%ec%9d%bc-%ec%9d%b4%eb%a6%84-%eb%ac%b8%ec%a0%9c" aria-label="Anchor">#</a></span></h3><img width="1200" alt="배포 에러" src="https://user-images.githubusercontent.com/102142287/185805739-ed325012-c974-4de8-a189-1e9f4cd421fe.png">
<p>배포 시 빌드 에러가 발생했다. 로컬에서 테스트했을 때는 발생하지 않았고, 내 로컬에서 main을 그대로 pull 해서 확인해도 이상이 없었다. 하지만 다른 팀원이 당겨서 확인했을 때는 배포 때와 같은 에러가 발생했고 이유는 단순히 파일 이름이 달라서 생긴 문제였다.</p>
<p>하지만 내 로컬에서만 파일 이름이 정상이었고 git status도 잡아내지 못했다. 찾아보니 파일 내용의 변경 없이 파일 이름만 바뀔 경우 이런 현상이 생길 수 있다고 한다. 다음부터는 주의해야겠다.</p>
<h3 id="watch-모드-문제" class="relative group">watch 모드 문제 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#watch-%eb%aa%a8%eb%93%9c-%eb%ac%b8%ec%a0%9c" aria-label="Anchor">#</a></span></h3><p>배포 버전에서 프로필 이미지 변경 시 해당 에러가 일어나 서버 담당자에게 문의했다. 검색 결과 watch 모드가 켜져 있을 때 발생하는 에러라서 watch 모드를 끄자 해결되었다고 전달받았다.</p>
<img width="800" alt="watch모드 에러" src="https://user-images.githubusercontent.com/84524514/186152662-91b1e2ff-15e9-400c-9c00-b27ad098f3a6.png">
<h2 id="해킹-시도" class="relative group">해킹 시도!? <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%ed%95%b4%ed%82%b9-%ec%8b%9c%eb%8f%84" aria-label="Anchor">#</a></span></h2><p>서버의 로그를 살펴보자 해킹 시도의 흔적으로 보이는 로그들이 찍혀있었다. 다행이 .env파일이 올라가있지 않고, FortiOS도 사용하고 있지 않아 문제는 없었으나 찝찝함이 남는다.</p>
<p>추가) 하루 뒤에도 살펴보자 <code>/manager</code> 등의 정보가 있을만한 API로 계속해서 요청을 시도하고 있었다.</p>
<img width="900" alt="해킹 시도 1" src="https://user-images.githubusercontent.com/84524514/186153524-55a40c91-fccd-429d-922a-b440b8af2225.png">
<img width="900" alt="해킹 시도 2" src="https://user-images.githubusercontent.com/84524514/186153541-ed11619d-1d8d-4014-b230-f3fe9d9760a2.png">

      </div>
    </section>
    <footer class="max-w-prose pt-8 print:hidden">
      
  <div class="flex">
    
    
    
    <div class="place-self-center">
      
      
      <div class="text-2xl sm:text-lg">
</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="group flex" href="/posts/projects/debate-ducks/25/">
              <span
                class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&larr;</span
                ><span class="ltr:hidden rtl:inline">&rarr;</span></span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >[Debate-Ducks] 체험 토론</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2022-08-19 00:00:00 &#43;0000 UTC">19 August 2022</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="group flex text-right" href="/posts/projects/debate-ducks/27/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >[Debate-Ducks] 크로스 브라우징 이슈</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2022-08-22 00:00:00 &#43;0000 UTC">22 August 2022</time>
                  
                </span>
              </span>
              <span
                class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&rarr;</span
                ><span class="ltr:hidden rtl:inline">&larr;</span></span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
        
          
        
      
    </footer>
  </article>

      </main>
      
        <div
          class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"
          id="to-top"
          hidden="true"
        >
          <a
            href="#the-top"
            class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
            aria-label="Scroll to top"
            title="Scroll to top"
          >
            &uarr;
          </a>
        </div>
      <footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            © 2021 Yuchan&rsquo;s hello world!
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://github.com/jpanther/congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    <div class="flex flex-row items-center">
      
      
      
      
        <div
          class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        >
          <button id="appearance-switcher-0" type="button" aria-label="appearance switcher">
            <div
              class="flex h-12 w-12 items-center justify-center dark:hidden"
              title="Switch to dark appearance"
            >
              <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
            </div>
            <div
              class="hidden h-12 w-12 items-center justify-center dark:flex"
              title="Switch to light appearance"
            >
              <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
            </div>
          </button>
        </div>
      
    </div>
  </div>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://yuchanjeong.github.io/"
>
  <div
    id="search-modal"
    class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex flex-none items-center justify-between px-2">
      <form class="flex min-w-0 flex-auto items-center">
        <div class="flex h-8 w-8 items-center justify-center text-neutral-400">
          <span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto overflow-auto px-2">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
</html>
